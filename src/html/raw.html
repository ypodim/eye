<!DOCTYPE html>
<head>
<script src="/static/jquery.min.js"></script>
<script>
var ws = new WebSocket("ws://localhost:8888/ws");
ws.onopen = function() {
   // ws.send("Hello, world");
};
ws.onmessage = function (evt) {
   var data = JSON.parse(evt.data);
   id = "#"+data.sensor_name;
   
   var sensor_name = $("<div></div>").addClass("sensor_name").html(data.sensor_name);
   var sensor_value = $("<div></div>").addClass("sensor_value").html(data.sensor_value);

   var store_size = $("<div></div>").addClass("store_size").html("store_size:"+data.sensor_stats.store_size);
   var inst_sum = $("<div></div>").addClass("store_size").html("inst_sum:"+data.sensor_stats.inst_sum);
   var inst_total = $("<div></div>").addClass("inst_total").html("inst_total:"+data.sensor_stats.inst_total);

   $(id).html("").append(sensor_name, sensor_value, store_size, inst_sum, inst_total);
};

$(document).ready(function() {  
   // console.log("started");
}); 

</script>

</head>

<style>
.chart { width: 500px; }
.sensor { margin: 10px; }
</style></head>
<body>
<div id="chart">
   {{ charts['testSensor'] }}

   <embed class="chart" type="image/svg+xml" src="{{ charts['testSensor'] }}" />
   <div class="sensor" id="internaltemp"></div>
   <div class="sensor" id="soil_moisture"></div>
   <div class="sensor" id="mic"></div>
   <div class="sensor" id="light"></div>
   <div class="sensor" id="temperature"></div>
   <div class="sensor" id="testSensor"></div>
</div>
</body>

</html>